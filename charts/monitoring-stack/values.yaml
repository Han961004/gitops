# 공통 네임스페이스
namespace: monitoring

# 1) nginx-ingress 설정
ingress-nginx:
  controller:
    service:
      type: LoadBalancer
    metrics:
      enabled: true

# 2) Prometheus 설정
prometheus:
  alertmanager:
    ingress:
      enabled: true
      hosts:
        - host: prometheus.example.com
          paths:
            - path: /
              pathType: ImplementationSpecific

  server:
    ingress:
      enabled: true
      hosts:
        - host: prometheus.example.com
          paths:
            - path: /
              pathType: ImplementationSpecific


# 3) Grafana 설정
grafana:
  admin:
    existingSecret: grafana-admin-credentials
  ingress:
    enabled: true
    hosts:
      - grafana.example.com
  sidecar:
    dashboards:
      enabled: true
    datasources:
      enabled: true
      defaultDatasourceEnabled: true

# 4) Loki 설정
loki:
  # (기존 ingress 등 다른 설정은 그대로 두시고 아래만 추가/변경)
  config:
    # ... (schema_config, rulerConfig 등 기존 config 설정)
    storage_config:
      boltdb_shipper:
        # 인덱스 데이터를 저장할 로컬 디렉토리
        active_index_directory: /data/loki/index
        # BoltDB-Shipper가 공유 스토어로 사용할 모드 설정
        shared_store: filesystem
      filesystem:
        # 청크(chunk) 파일을 저장할 로컬 디렉토리
        directory: /data/loki/chunks
